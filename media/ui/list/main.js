import{r as d,j as i,n as L,R as u,c as S}from"../index.browser/chunks/index.browser.js";let v=null;typeof window<"u"&&window.acquireVsCodeApi&&(v||(v=window.acquireVsCodeApi()));function C(){const e=v,t=d.useRef(new Set);return d.useEffect(()=>{const n=o=>{t.current.forEach(a=>a(o.data))};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}},[]),e?{postMessage:n=>e.postMessage(n),onMessage:n=>t.current.add(n),offMessage:n=>t.current.delete(n)}:null}function I({children:e,border:t=!0,...r}){return i.jsx("ul",{...r,style:{background:"var(--vscode-editorWidget-background)",color:"var(--vscode-editorWidget-foreground)",borderRadius:"var(--radius-1)",padding:0,margin:0,listStyle:"none",...t?{border:"1px solid var(--vscode-editorWidget-border)"}:{},...r.style},children:e})}function M({children:e,border:t=!0,toolbar:r,...n}){return i.jsxs("li",{...n,style:{display:"flex",alignItems:"center",gap:"16px",padding:"8px",...t?{borderBottom:"1px solid var(--vscode-editorWidget-border)"}:{},...n.style},children:[i.jsx("span",{style:{flex:1},children:e}),r&&r]})}function z(e){async function t(r,n={}){if(!e)throw new Error("VS Code API not available");const o=L();return new Promise((a,l)=>{const c=s=>{const{mcp:f}=s;if(!f)return;const{requestId:E,result:P,error:m}=f||{};E===o&&(e?.offMessage?.(c),m?l(m):a(P))};e.onMessage?.(c),e.postMessage({mcp:{mcpId:r,payload:n,requestId:o}})})}return{dispatch:t}}function h({icon:e,style:t,className:r,...n}){return i.jsx("button",{...n,className:`icon-btn${r?` ${r}`:""}`,style:{background:"none",border:"none",padding:4,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:18,minWidth:32,minHeight:32,cursor:"pointer",verticalAlign:"middle",color:"var(--vscode-icon-foreground)",transition:"color 0.15s ease",...t},onMouseEnter:o=>o.currentTarget.style.color="var(--vscode-editorLink-activeForeground)",onMouseLeave:o=>o.currentTarget.style.color="var(--vscode-icon-foreground)",onFocus:o=>o.currentTarget.style.color="var(--vscode-editorLink-activeForeground)",onBlur:o=>o.currentTarget.style.color="var(--vscode-icon-foreground)",children:i.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:e})})}const A={small:"var(--font-size-small, 12px)",medium:"var(--font-size-medium, 14px)",large:"var(--font-size-large, 18px)",xlarge:"var(--font-size-xlarge, 24px)"},W={default:"var(--vscode-foreground)",secondary:"var(--vscode-descriptionForeground)",error:"var(--vscode-errorForeground)",warning:"var(--vscode-editorWarning-foreground, orange)",info:"var(--vscode-editorInfo-foreground, blue)",muted:"var(--vscode-editorHint-foreground, #888)"};function y({size:e="medium",bold:t=!1,color:r="default",style:n,children:o,as:a="span"}){const l=a||"span";return d.createElement(l,{style:{fontSize:A[e],fontWeight:t?"bold":"normal",color:W[r],...n}},o)}var j={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x=u.createContext&&u.createContext(j),N=["attr","size","title"];function T(e,t){if(e==null)return{};var r=V(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function V(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(n){_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _(e,t,r){return t=B(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){var t=F(e,"string");return typeof t=="symbol"?t:t+""}function F(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w(e){return e&&e.map((t,r)=>u.createElement(t.tag,p({key:r},t.attr),w(t.child)))}function O(e){return t=>u.createElement(R,g({attr:p({},e.attr)},t),w(e.child))}function R(e){var t=r=>{var{attr:n,size:o,title:a}=e,l=T(e,N),c=o||r.size||"1em",s;return r.className&&(s=r.className),e.className&&(s=(s?s+" ":"")+e.className),u.createElement("svg",g({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,l,{className:s,style:p(p({color:e.color||r.color},r.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),a&&u.createElement("title",null,a),e.children)};return x!==void 0?u.createElement(x.Consumer,null,r=>t(r)):t(j)}function k(e){return O({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13.23 1h-1.46L3.52 9.25l-.16.22L1 13.59 2.41 15l4.12-2.36.22-.16L15 4.23V2.77L13.23 1zM2.41 13.59l1.51-3 1.45 1.45-2.96 1.55zm3.83-2.06L4.47 9.76l8-8 1.77 1.77-8 8z"},child:[]}]})(e)}function q(e){return O({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.78 2L3 2.41v12l.78.42 9-6V8l-9-6zM4 13.48V3.35l7.6 5.07L4 13.48z"},child:[]}]})(e)}function D({label:e="Loading...",size:t=24,style:r,align:n="default"}){const o={display:"flex",alignItems:"center",gap:12,...n==="center"?{justifyContent:"center",width:"100%"}:{},...r};return i.jsxs("div",{style:o,children:[i.jsx("span",{style:{width:t,height:t,display:"inline-block",border:`${t/8}px solid var(--vscode-editorWidget-border, #ccc)`,borderTop:`${t/8}px solid #0078d4`,borderRadius:"50%",animation:"spin 1s linear infinite"}}),i.jsx("span",{children:e}),i.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})}const $=()=>{const[e,t]=d.useState([]),[r,n]=d.useState(!0),[o,a]=d.useState(null),l=C(),c=z(l);return d.useEffect(()=>{async function s(){n(!0),a(null);try{const f=await c.dispatch("agent.listAgents");t(f.agents??[])}catch(f){a(f?.message||"Failed to load agents")}finally{n(!1)}}s()},[]),r?i.jsx(D,{align:"center"}):o?i.jsxs("div",{children:["Error: ",o]}):i.jsx(I,{border:!1,children:e.length===0?i.jsx("li",{children:"No agents found."}):e.map(s=>i.jsxs(M,{border:!1,style:{cursor:"pointer"},toolbar:i.jsxs("div",{style:{display:"flex",gap:8},children:[i.jsx(h,{icon:i.jsx(k,{}),onClick:()=>c.dispatch("editor.openFile",{path:s.path})}),i.jsx(h,{icon:i.jsx(q,{}),onClick:()=>c.dispatch("agent.runAgent",{filepath:s.path})})]}),children:[i.jsx(y,{as:"div",children:s.name}),i.jsxs(y,{as:"div",size:"small",color:"muted",children:["...",s.path?.slice(-35)]})]},s.id))})};function H(){return i.jsx($,{})}const G=S.createRoot(document.getElementById("root"));G.render(i.jsx(H,{}));
